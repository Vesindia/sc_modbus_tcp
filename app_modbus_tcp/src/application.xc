// Copyright (c) 2011, XMOS Ltd., All rights reserved
// This software is freely distributable under a derivative of the
// University of Illinois/NCSA Open Source License posted in
// LICENSE.txt and at <http://github.xcore.com/>

/*===========================================================================
Filename:
Project :
Author  :
Version :
Purpose
-----------------------------------------------------------------------------


===========================================================================*/

/*---------------------------------------------------------------------------
include files
---------------------------------------------------------------------------*/
#include "application.h"
#include "tcpip_if.h"

/*---------------------------------------------------------------------------
constants
---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
extern variables
---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
typedefs
---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
global variables
---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
static variables
---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
prototypes
---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------
implementation
---------------------------------------------------------------------------*/

/** =========================================================================
*  application
*
*  \param tcp_svr    Channel that contains data received from TCP
*
**/
void application(chanend tcp_svr)
{
    xtcp_connection_t conn;

    tcp_reset(tcp_svr);

    // Loop forever processing TCP events
    while (1)
    {
        select
        {
            case xtcp_event(tcp_svr, conn):
            {
                tcp_handle_event(tcp_svr, conn);
                break;
            } // case xtcp_event
        } // select
    } // while(1)
}

/*=========================================================================*/
